力扣中等



给你一根长度为 n 的绳子，请把绳子剪成整数长度的 m 段（m、n都是整数，n>1并且m>1）,请问可能的最大乘积是多少？

例如，当绳子的长度是8时，我们把它剪成长度分别为2、3、3的三段，此时得到的最大乘积是18。



答案需要取模 1e9+7（1000000007），如计算初始结果为：1000000008，请返回 1。

 

示例 1：

输入: 2
输出: 1
解释: 2 = 1 + 1, 1 × 1 = 1



示例 2:

输入: 10
输出: 36
解释: 10 = 3 + 3 + 4, 3 × 3 × 4 = 36


提示：2 <= n <= 1000





思路：

相比上一题，加入大数的幂次计算，以及大数的求余计算。

大数的幂次计算用上快速幂算法可以将幂次**计算时间复杂度优化为logN**，N是幂数。

**快速幂本身也是二分法的体现。**

````python
# 求 (x^a) % p —— 快速幂求余，例如：3^199
#也可以转换为简单的位运算。
def remainder(x, a, p):
    ret = 1
    while a > 0:
        if a % 2 == 1 :rem = (ret * x) % p
        x = (x * x) % p
        a = a / 2
    return ret
````



````java
class Solution {
    public int cuttingRope(int n) {
        if(n <= 3) return n - 1;
        int a = n / 3 - 1;// 19/3 = 6-1 = 5 少算一个最后处理乘积。
        int b = n % 3, p = 1000000007;
        long ret = 1, x = 3;
        //计算幂次的时候加上快速幂计算幂次结果。
        while(a > 0) {
            if(a % 2 == 1) ret = (ret * x) % p;
            x = (x * x) % p;
            a /= 2;
        }
        if(b == 0) return (int)(ret * 3 % p);
        if(b == 1) return (int)(ret * 4 % p);
        return (int)(ret * 3 * 2 % p);
    }
}
````

